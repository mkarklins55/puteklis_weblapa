<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="UTF-8">
  <title>ModƒÅlais pleijeris¬†|¬†Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap¬†5¬†CSS¬†(CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* ===== Spotify‚Äëtipa pleijera stils (pielƒÅgots modalam) ===== */
    #playerBar{
      background:#181818;
      display:flex;
      align-items:center;
      gap:15px;
      padding:10px 20px;
      border-radius:12px;
      width:100%;
      color:#fff;
    }
    #playerBar img{width:48px;height:48px;object-fit:cover;border-radius:4px}
    #trackMeta{flex:1;min-width:0}
    #trackMeta h5{margin:0;font-size:.95em}
    #trackMeta span{font-size:.8em;color:#aaa}
    .player-btn{
      background:#303030;border:none;color:#fff;font-size:1.35em;cursor:pointer;
      border-radius:6px;width:40px;height:40px;display:flex;align-items:center;justify-content:center
    }
    .player-btn:hover{filter:brightness(1.15)}
    .player-btn:disabled{opacity:.3;cursor:default}
    .player-btn.active{background:#1db954;color:#fff}
    #progressWrap{flex:2;display:flex;align-items:center;gap:8px}
    #progress{flex:1;height:4px;background:#444;border-radius:2px;cursor:pointer}
    #progressFill{height:100%;background:#1db954;border-radius:2px;width:0}
    #timestamp{width:60px;font-size:.75em;text-align:right}
    @media(max-width:600px){
      #playerBar img{display:none}
      #progressWrap{display:none}
    }
  </style>
</head>
<body class="bg-dark text-light">

<!-- ===== DEMO Poga lai atvƒìrtu modƒÅlo ===== -->
<div class="container py-5 text-center">
  <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#musicModal">Atver pleijeri</button>
</div>

<!-- ===== ModƒÅlais logs ar pleijeri ===== -->
<div class="modal fade" id="musicModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-light border-secondary">
      <div class="modal-header border-0">
        <h5 class="modal-title">Mans pleijeris</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="playerBar" style="display:none">
          <img id="coverMini" src="" alt="VƒÅci≈Ü≈°" />
          <div id="trackMeta">
            <h5 id="trackTitle">‚Äî</h5>
            <span id="trackStyle">‚Äî</span>
          </div>
          <button id="shuffleBtn" class="player-btn" title="Shuffle">üîÄ</button>
          <button id="prevBtn" class="player-btn">‚èÆÔ∏è</button>
          <button id="playPauseBtn" class="player-btn">‚ñ∂Ô∏è</button>
          <button id="nextBtn" class="player-btn">‚è≠Ô∏è</button>
          <div id="progressWrap">
            <div id="progress"><div id="progressFill"></div></div>
            <div id="timestamp">0:00</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap¬†5¬†JS¬†(CDN) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// ===== Pleijera loƒ£ika (saƒ´sinƒÅta) =====
const qs = s => document.querySelector(s);
const fmt = sec => { sec = Math.floor(sec); return Math.floor(sec/60)+':' + ('0'+sec%60).slice(-2); };

const audio      = new Audio();
const bar        = qs('#playerBar');
const coverMini  = qs('#coverMini');
const trackTitle = qs('#trackTitle');
const trackStyle = qs('#trackStyle');
const playBtn    = qs('#playPauseBtn');
const prevBtn    = qs('#prevBtn');
const nextBtn    = qs('#nextBtn');
const shuffleBtn = qs('#shuffleBtn');
const progress   = qs('#progress');
const fill       = qs('#progressFill');
const stamp      = qs('#timestamp');

// Demo playlist ‚Äî nomaini ar saviem datiem (image, audio utt.)
const playlist = [{
  title: 'Mana dziesma',
  style: 'EksperimentƒÅlƒÅ elektronika',
  image: 'covers/dziesma.jpg',
  audio: 'audio/dziesma.mp3'
}];
let current = 0;
let shuffle = false;

// Kad modƒÅls atveras ‚Äî ielƒÅdƒì un atska≈Üo dziesmu
document.getElementById('musicModal').addEventListener('show.bs.modal', () => {
  loadTrack(current);
});

shuffleBtn.onclick = () => { shuffle = !shuffle; shuffleBtn.classList.toggle('active', shuffle); };
prevBtn.onclick = () => { if (shuffle) playRandom(); else if (current > 0) loadTrack(--current); };
nextBtn.onclick = () => { if (shuffle) playRandom(); else if (current < playlist.length-1) loadTrack(++current); };
playBtn.onclick = () => {
  if (audio.paused) { audio.play(); playBtn.textContent = '‚è∏Ô∏è'; }
  else { audio.pause(); playBtn.textContent = '‚ñ∂Ô∏è'; }
};
audio.ontimeupdate = () => {
  if (audio.duration) {
    fill.style.width = (audio.currentTime / audio.duration * 100) + '%';
    stamp.textContent = fmt(audio.currentTime);
  }
};
audio.onended = () => nextBtn.onclick();
progress.onclick = e => {
  const r = progress.getBoundingClientRect();
  audio.currentTime = ((e.clientX - r.left) / r.width) * audio.duration;
};

function loadTrack(i){
  const song = playlist[i];
  audio.src = song.audio;
  audio.play();
  bar.style.display = 'flex';
  coverMini.src = song.image;
  trackTitle.textContent = song.title;
  trackStyle.textContent = song.style;
  playBtn.textContent = '‚è∏Ô∏è';
  prevBtn.disabled = (i === 0 && !shuffle);
  nextBtn.disabled = (i === playlist.length-1 && !shuffle);
}
function playRandom(){ loadTrack(Math.floor(Math.random()*playlist.length)); }
</script>
</body>
</html>
